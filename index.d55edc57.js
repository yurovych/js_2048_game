var t=document.querySelector(".button"),e=document.querySelector(".message-start"),n=document.querySelector(".message-win"),a=document.querySelector(".message-lose"),o=document.querySelectorAll(".field-cell"),i=document.querySelector(".game-score"),s=document.querySelector(".add-points"),r=function(){return .1>=Math.random()?4:2},c=function(){var t;do t=Math.floor(Math.random()*o.length);while(""!==o[t].textContent)return t},l=function(){o.forEach(function(t){switch(t.classList.remove("field-cell--2","field-cell--4","field-cell--8","field-cell--16","field-cell--32","field-cell--64","field-cell--128","field-cell--256","field-cell--512","field-cell--1024","field-cell--2048"),t.textContent){case"":break;case"2":t.classList.add("field-cell--2");break;case"4":t.classList.add("field-cell--4");break;case"8":t.classList.add("field-cell--8");break;case"16":t.classList.add("field-cell--16");break;case"32":t.classList.add("field-cell--32");break;case"64":t.classList.add("field-cell--64");break;case"128":t.classList.add("field-cell--128");break;case"256":t.classList.add("field-cell--256");break;case"512":t.classList.add("field-cell--512");break;case"1024":t.classList.add("field-cell--1024");break;case"2048":t.classList.add("field-cell--2048"),n.classList.remove("hidden")}})};t.addEventListener("click",function(){t.classList.remove("start"),t.textContent="Restart",t.classList.add("restart"),e.classList.add("hidden"),n.classList.add("hidden"),a.classList.add("hidden"),i.textContent="0";for(var s=0;s<o.length;s++)o[s].textContent="";var c=Math.floor(Math.random()*o.length),d=function(){var t;do t=Math.floor(Math.random()*o.length);while(t===c)return t}();o[c].textContent="".concat(r()),o[d].textContent="".concat(r()),l()}),document.addEventListener("keydown",function(t){t.preventDefault();var e="0",n=function(){s.classList.contains("animationScore")&&s.classList.remove("animationScore"),s.offsetWidth,s.classList.remove("hidden"),s.textContent="+".concat(e),s.classList.add("animationScore"),s.addEventListener("animationend",function(){s.classList.add("hidden")})},d=!0,f=!1,x=void 0;try{for(var C,v,m=o[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){var L=v.value;if(""!==L.textContent){C=!0;break}}}catch(t){f=!0,x=t}finally{try{d||null==m.return||m.return()}finally{if(f)throw x}}if("ArrowUp"===t.key&&!0===C){for(var u=!1,h=0;h<o.length;h++)!function(t){var a=t,s=function(){a>3&&""!==o[a].textContent&&""===o[a-4].textContent?(o[a-4].textContent=o[a].textContent,o[a].textContent="",a-=4,u=!0,s()):a>3&&""!==o[a].textContent&&o[a-4].textContent===o[a].textContent&&!o[a-4].classList.contains("reserved")&&(o[a-4].textContent*=2,o[a].textContent="",o[a-4].classList.add("animationMerge"),o[a-4].classList.add("reserved"),e="".concat(+e+ +o[a-4].textContent),o[a-4].addEventListener("animationend",function(){o[a-4].classList.remove("animationMerge")}),u=!0,i.textContent="".concat(+o[a-4].textContent+ +i.textContent),n())};s()}(h);if(u){var y=c();o[y].textContent="".concat(r()),o[y].classList.add("animationAppear"),o[y].addEventListener("animationend",function(){o[y].classList.remove("animationAppear")})}l()}if("ArrowDown"===t.key&&!0===C){for(var g=!1,p=o.length-1;p>=0;p--)!function(t){var a=t,s=function(){a<12&&""!==o[a].textContent&&""===o[a+4].textContent?(o[a+4].textContent=o[a].textContent,o[a].textContent="",a+=4,g=!0,s()):a<12&&""!==o[a].textContent&&o[a+4].textContent===o[a].textContent&&!o[a+4].classList.contains("reserved")&&(o[a+4].textContent*=2,o[a].textContent="",o[a+4].classList.add("animationMerge"),o[a+4].classList.add("reserved"),e="".concat(+e+ +o[a+4].textContent),o[a+4].addEventListener("animationend",function(){o[a+4].classList.remove("animationMerge")}),g=!0,i.textContent="".concat(+o[a+4].textContent+ +i.textContent),n())};s()}(p);if(g){var k=c();o[k].textContent="".concat(r()),o[k].classList.add("animationAppear"),o[k].addEventListener("animationend",function(){o[k].classList.remove("animationAppear")})}l()}if("ArrowLeft"===t.key&&!0===C){for(var b=!1,M=0;M<o.length;M++)!function(t){var a=t,s=function(){a%4!=0&&""!==o[a].textContent&&""===o[a-1].textContent?(o[a-1].textContent=o[a].textContent,o[a].textContent="",a-=1,b=!0,s()):a%4==0||""===o[a].textContent||o[a-1].textContent!==o[a].textContent||o[a-1].classList.contains("reserved")||(o[a-1].textContent*=2,o[a].textContent="",o[a-1].classList.add("animationMerge"),o[a-1].classList.add("reserved"),e="".concat(+e+ +o[a-1].textContent),o[a-1].addEventListener("animationend",function(){o[a-1].classList.remove("animationMerge")}),b=!0,i.textContent="".concat(+o[a-1].textContent+ +i.textContent),n())};s()}(M);if(b){var w=c();o[w].textContent="".concat(r()),o[w].classList.add("animationAppear"),o[w].addEventListener("animationend",function(){o[w].classList.remove("animationAppear")})}l()}if("ArrowRight"===t.key&&!0===C){for(var A=!1,S=o.length-1;S>=0;S--)!function(t){var a=t,s=function(){(a-3)%4!=0&&""!==o[a].textContent&&""===o[a+1].textContent?(o[a+1].textContent=o[a].textContent,o[a].textContent="",a+=1,A=!0,s()):(a-3)%4==0||""===o[a].textContent||o[a+1].textContent!==o[a].textContent||o[a+1].classList.contains("reserved")||(o[a+1].textContent*=2,o[a].textContent="",o[a+1].classList.add("animationMerge"),o[a+1].classList.add("reserved"),e="".concat(+e+ +o[a+1].textContent),o[a+1].addEventListener("animationend",function(){o[a+1].classList.remove("animationMerge")}),A=!0,i.textContent="".concat(+o[a+1].textContent+ +i.textContent),n())};s()}(S);if(A){var E=c();o[E].textContent="".concat(r()),o[E].classList.add("animationAppear"),o[E].addEventListener("animationend",function(){o[E].classList.remove("animationAppear")})}l()}for(var q=function(){var t=!0,e=!0,n=!1,a=void 0;try{for(var i,s=o[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var r=i.value;""===r.textContent&&(t=!1)}}catch(t){n=!0,a=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw a}}return t}(),D=!0,R=4;R<o.length-4;R++)(o[R].textContent===o[R-4].textContent||o[R].textContent===o[R+4].textContent)&&(D=!1);for(var U=0;U<o.length;U++)U%4!=0?o[U].textContent===o[U-1].textContent&&(D=!1):(U-3)%4!=0&&o[U].textContent===o[U+1].textContent&&(D=!1);!0===q&&!0===D&&a.classList.remove("hidden");var W=!0,j=!1,z=void 0;try{for(var B,F=o[Symbol.iterator]();!(W=(B=F.next()).done);W=!0)B.value.classList.remove("reserved")}catch(t){j=!0,z=t}finally{try{W||null==F.return||F.return()}finally{if(j)throw z}}});
//# sourceMappingURL=index.d55edc57.js.map
